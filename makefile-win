.PHONY: all lib app plugin setup clean distclean

all: lib app plugin setup

lib:
	cd lib && mingw32-make -f makefile-win

app:
	cd app && qmake "CONFIG+=release" && mingw32-make -j4

plugin:
	cd plugin && qmake "CONFIG+=release" && mingw32-make -j4

setup:
	cd setup && setup-windows.bat

clean:
	cd lib && mingw32-make clean -f makefile-win; true
	cd app && mingw32-make clean -f makefile-win; true
	cd plugin && mingw32-make clean
	del /s "*.o"
	del /s "*.pro.user"

distclean: clean
	cd lib && mingw32-make distclean -f makefile-win
	cd app && mingw32-make distclean -f makefile-win
	cd plugin && mingw32-make distclean -f makefile-win
